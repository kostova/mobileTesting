function LoadArgs(a){var b={};if(!fs.existsSync(a))return b;try{var c=fs.readFileSync(a,"utf8");b=JSON.parse(c)}catch(d){console.log("Invalid config file")}return b}function GetOptionsName(a){for(var b=0;b<a.args.length;b++){var c=a.args[b]._name;if(c)return c}return"default"}var DEFAULT_FILE_NAME="config.json",MESSAGE_SERVER_URL="ws://localhost:8081",SPECS_PATH="./",MATCHER=".*js",SHARED_KEY="5e2e79fa-a3b3-9b65-a9ee-dafa1d83fc68",MESSAGE_TIMEOUT=3e4,DEFAULT_SCREENSHOTS_MODE="screenshot-ops",DEFAULT_ARGS={"default":{agents:void 0,specsPath:SPECS_PATH,matcher:MATCHER,suites:void 0,files:void 0,filter:void 0,allowConsoleLog:!1,verbose:!1,quiet:!1,outputFile:void 0,socketsServerAddress:void 0,screenshots:void 0,screenshotsMode:DEFAULT_SCREENSHOTS_MODE,messageServerUrl:MESSAGE_SERVER_URL,messageTimeout:MESSAGE_TIMEOUT,sharedKey:SHARED_KEY,publish:!1,apiKey:void 0,projectId:void 0,publishUrl:void 0,disableColor:!1},getagents:{messageServerUrl:MESSAGE_SERVER_URL,sharedKey:SHARED_KEY,messageTimeout:MESSAGE_TIMEOUT},getsuites:{specsPath:SPECS_PATH,matcher:MATCHER,files:void 0,messageServerUrl:MESSAGE_SERVER_URL,sharedKey:SHARED_KEY},server:{messageServerPort:8081,testRunnerPort:3001,messageTimeout:MESSAGE_TIMEOUT,launchTestRunner:!1,verbose:!1},connect:{messageServerUrl:MESSAGE_SERVER_URL,sharedKey:SHARED_KEY,messageTimeout:MESSAGE_TIMEOUT,address:void 0},disconnect:{messageServerUrl:MESSAGE_SERVER_URL,sharedKey:SHARED_KEY,agents:void 0},launch:{messageServerUrl:MESSAGE_SERVER_URL,sharedKey:SHARED_KEY,agents:void 0,app:void 0},close:{messageServerUrl:MESSAGE_SERVER_URL,sharedKey:SHARED_KEY,agents:void 0},getelements:{messageServerUrl:MESSAGE_SERVER_URL,sharedKey:SHARED_KEY,agents:void 0},highlight:{messageServerUrl:MESSAGE_SERVER_URL,sharedKey:SHARED_KEY,agents:void 0,identifier:void 0,query:void 0,cancel:!1},subscribe:{messageServerUrl:MESSAGE_SERVER_URL,sharedKey:SHARED_KEY,agents:void 0}},fs=require("fs"),argumentManager={applyDefaults:function(a,b){var c=GetOptionsName(b),d=DEFAULT_ARGS[c];for(var e in d)a[e]=b[e]||a[e]||d[e]},load:function(a,b){if(b.config){var c="string"==typeof b.config?b.config:DEFAULT_FILE_NAME,d=LoadArgs(c),e=GetOptionsName(b),f=d[e];if(f){console.log("Loaded config file '"+c+"'");for(var g in f)a[g]=a[g]||f[g]}}},save:function(a,b){if(b.save){var c="string"==typeof b.save?b.save:DEFAULT_FILE_NAME,d=LoadArgs(c),e=GetOptionsName(b),f=DEFAULT_ARGS[e];d[e]={};for(var g in f)d[e][g]=a[g]||b[g];try{fs.writeFileSync(c,JSON.stringify(d,null,"	")),console.log("Created config file '"+c+"'")}catch(h){console.log("Error creating config file")}}}};module.exports=argumentManager;