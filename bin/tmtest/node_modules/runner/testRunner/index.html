<!DOCTYPE HTML>
<html lang="en">
	<head>
		<title>Test Runner</title>
		<meta charset="utf-8">

		<link href="assets/kendo.common.min.css" rel="stylesheet">
		<link href="assets/kendo.metro.min.css" rel="stylesheet">
		<link href="assets/tap-style.css" rel="stylesheet">
		<link href="assets/font-awesome.min.css" rel="stylesheet">
		<link href="assets/runner.css" rel="stylesheet">
	</head>
	<body>

		<div class="tap-header" style="position: static;">
			<div class="main-navigation">
				<ul id="breadcrumb">
					<li><a><span>Telerik</span><span style="font-weight: normal; color: #3496da;">&nbsp;Mobile Testing</span></a></li>
				</ul>
			</div>

			<ul class="global-nav">
				<li class="global global-settings">
					<a href="#" id="settingsBtn">
						<i class="icon-cog"></i>
						<span>Settings</span>
					</a>
				</li>
				<li class="global global-help">
					<a href="http://docs.telerik.com/platform/mobile-testing/overview" target="_blank">
						<i class="icon-question-sign"></i>
						<span>Help</span>
					</a>
				</li>
			</ul>
		</div>

		<div id="tabsContainer" class="head-nav" style="position: static;">
			<h1>Tests</h1>
			<ul class="tabs-container head-nav-right">
				<li><a href="#/tests" class="active" data-content="#testTab" data-label="tests"><i class="icon-beaker"></i>Tests</a></li>
				<li><a href="#/results" data-content="#resultsTab" data-label="results"><i class="icon-list-alt"></i>Results</a></li>
			</ul>
		</div>

		<div id="testTab" class="panelsWrapper active">			
			<div class="button-bar">
				<div class="button-bar-half">					
					
					<button id="startRun" class="tap-button-regular runTests" disabled><i class="icon-caret-right"></i>Run Tests</button>

					<div class="runProgressContainer">
						<ul class="stats-bars">
							<li class="progressBarLI">
								<div class="bar-label">
									<span class="label-title"></span>
								</div>
								<div class="progress">
									<div id="runProgress" class="bar" style="width: 10%;"></div>
								</div>
							</li>
							<li class="cancelRunLI">
								<a href="#" id="cancelRun" class="x-link"><i class="icon-remove-sign"></i></a>								
							</li>
						</ul>
					</div>
				</div><div class="button-bar-half">
					<div class="agentButtons">
						<button id="addAgentBtn" class="tap-button-regular"><i class="icon-plus"></i>Add Agents</button>
					</div>
				</div>
			</div>
			<div class="halfPanel">		
				<div class="loader-big"></div>			
				<div class="suiteToggler">
					<label><input type="checkbox" id="sweetSuiteToggler" checked>All<em></em></label>
				</div>

				<div id="testView" class="data-panel"></div>

			</div><div class="halfPanel">				
				<div id="agentView" class="data-panel common-grid"></div>
			</div>
		</div>

		<div id="resultsTab" class="panelsWrapper">
			<div class="button-bar">
<!-- 				<div id="publish-buttons" style="display: none;">
					<button id="publishBtn" class="tap-button-regular"><i class="icon-share-alt icon-fixed-width"></i>Publish</button>
					<span id="publishStatus"></span><br/>
				</div>	 -->
				<div id="publish-buttons" style="display: none;">
					<span id="publishBtn"></span>
					<span id="publishStatus"></span><br/>
				</div>					
			</div>
			<div class="fullPanel" id="resultsResults" style="display: none;">				
				<div id="resultView" class="data-panel common-grid"></div>
			</div>
			<div class="fullPanel" id="resultsEmpty">
				<div class="empty-message">
					<h1>There are no Results yet.</h1>
				</div>
			</div>
		</div>

		<!-- templates -->
		<script id="settingsWindowContent" type="text/x-kendo-template">
			<div class="loader-big" style="display:none;"></div>		
			<p>
				<label>Spec Folder</label>
				<input id="swcSpecFolderText" type="text" value="#= specFolder #">
			</p>

			<span style="display: none; visibility: hidden;">
				<label>Publish settings</label>
				<div class="common-options publish-settings">
					<div class="common-option">
						<label>
							<input type="radio" name="permission-option" value="TelerikPlatform" data-bind="checked: selectedOption">
							<em></em> Publish to Telerik Platform
						</label>
						<div class="option-hint" data-bind="visible: telerikPlatformSelected">
							<div class="option-wrap">
								<h3>How to publish</h3>
								<ol>
									<li>Log in to the <a href="https://platform.telerik.com/" target="_blank">Telerik Platform</a></li>
									<li>Open a Workspace</li>
									<li>Create a Mobile Testing project</li>
									<li>Click API key</li>
									<li>Copy and paste the Project ID and API Key below</li>
								</ol>
							</div>
							<div class="hint-arrow"></div>
						</div>
					</div>
					<div class="custom-url-option common-option">
						<label class="default">
							<input type="radio" name="permission-option" value="Custom" data-bind="checked: selectedOption">
							<em></em> Publish to Custom URL
						</label>
						<div class="option-hint" data-bind="invisible: telerikPlatformSelected">
							<div class="option-wrap">
								<h3>How to publish</h3>
								<ol>
									<li>Enter custom url</li>
									<li>Log-in to OnPremise Telerik Platform</li>
									<li>Open a Workspace</li>
									<li>Create a Mobile Testing project</li>
									<li>Click API key</li>
									<li>Copy and paste the Project ID and API Key below</li>
								</ol>
							</div>
							<div class="hint-arrow"></div>
						</div>
					</div>
				</div>
				<div style="margin-top:5em"></div>
				<p class="tighter" data-bind="invisible: telerikPlatformSelected">
					<label>Custom URL</label>
					<input id="swcCustomURLText" value="#= publishURL #" type="text"/>
				</p>
				<p class="tighter">
					<label>Project ID</label>
					<input id="swcProjectIdText" value="#= projectKey #" type="text"/>
				</p>
				<p class="tighter">
					<label>API Key</label>
					<input id="swcApiKeyText" value="#= apiKey #" type="text"/>
				</p>
			</span> 

			<div class="actions">
				<button id="saveSettingsBtn" class="tap-button-positive">Save</button>
				<button id="cancelSettingsBtn" class="closeModal">Cancel</button>
				<div class="verNum">#= telerikTesting.version #</div>
			</div>
			
		</script>
		<!--
		<script id="desktopWebContent" type="text/x-kendo-template">
			<p>Select browsers to execute web tests.</p>

			<p class="browserList" id="dwdContainer">
				<label class="header"><input type="checkbox" id="dwdToggleAll">All<em></em></label>
			</p>

			<div class="actions">
				<button id="dwdOkBtn" class="tap-button-positive">OK</button>
				<button id="dwdCancelBtn" class="closeModal">Cancel</button>
			</div>
		</script>
		<script id="mobileWebContent" type="text/x-kendo-template">
			<p>
				Navigate your mobile browser to this URL:<br>
				<strong id='mwcURL'></strong>
			</p>
			<div class="actions">
				<button id="mwdOkBtn" class="tap-button-positive closeModal">OK</button>
			</div>
		</script>
		<script id="mobileAppContent" type="text/x-kendo-template">
			<p>
				Download the Telerik Mobile Testing app to your device<br>
				<strong><a href="\#" target="_blank">Learn How</a></strong>
			</p>
			<div class="actions">
				<button id="madOkBtn" class="tap-button-positive closeModal">OK</button>
			</div>
		</script>
		-->
		<script id="addAgentContent" type="text/x-kendo-template">
			<p>
				<strong>Android, iOS, WP8 native</strong><br>
				<a href="http://docs.telerik.com/teststudio/test-studio-mobile/installation/download" target="_blank">Download</a> the Telerik Mobile Testing app and enter:<br>
				<span style="display: block; margin: 8px 0;">
					<span style="color: \\#999;">Host:</span> #= messageServerHost #<br>
					<span style="color: \\#999;">Port:</span> #= messageServerPort #<br>
				</span>
			</p>

			<p>
				<strong>Web</strong><br>
				Navigate your mobile browser to this URL:<br>
				<a href="#= agentUrl #" target="_blank">#= agentUrl #</a>
			</p>

			<div class="actions">
				<button id="mwdOkBtn" class="tap-button-positive closeModal">OK</button>
			</div>
		</script>
		<script id="disconnectedContent" type="text/x-kendo-template">
			<p>Relaunch Test Runner from the command line, then refresh this page.</p>
			<div class="actions">
				<button id="discRefresh" class="tap-button-positive">Refresh</button>
			</div>
		</script>
		<script id="unableToLoadContent" type="text/x-kendo-template">
			<p>Browser does not support WebSockets.<br> <a href="http://docs.telerik.com/platform/mobile-testing/system-requirements">Learn More</a></p>
			<div class="actions"></div>
		</script>
		<script id="resultInfoContent" type="text/x-kendo-template">
			<div>
				<div id='resultInfoGrid' class="data-panel common-grid"></div>
				<div class="actions">
					<button id='ricCloseBtn' class="closeModal">Close</button>
				</div>
			</div>
		</script>
		<script id="resultColumnTemplate" type="text/x-kendo-template">
			# if (status === "PASS") { #
				<i class="success icon-ok-sign"></i>
			# } else if(status === "FAIL") { #
				<i class="fail icon-remove-sign"></i>
			# } else if(status === "SKIP") { #
				<i class="skip icon-question-sign"></i>
			# } #
		</script>
		<script id="publishInfoContent" type="text/x-kendo-template">
			<div class="common-options publish-settings">
				<div class="common-option">
					<label>
						<input type="radio" name="permission-option" value="TelerikPlatform" data-bind="checked: selectedOption">
						<em></em> Publish to Telerik Platform
					</label>
					<div class="option-hint" data-bind="visible: telerikPlatformSelected">
						<div class="option-wrap">
							<h3>How to publish</h3>
							<ol>
								<li>Log-in to the <a href="https://platform.telerik.com/" target="_blank">Telerik Platform</a></li>
								<li>Open a Workspace</li>
								<li>Create a Mobile Testing project</li>
								<li>Click API key</li>
								<li>Copy and paste the Project ID and API Key below</li>
							</ol>
						</div>
						<div class="hint-arrow"></div>
					</div>
				</div>
				<div class="custom-url-option common-option">
					<label class="default">
						<input type="radio" name="permission-option" value="Custom" data-bind="checked: selectedOption">
						<em></em> Publish to Custom URL
					</label>
					<div class="option-hint" data-bind="invisible: telerikPlatformSelected">
						<div class="option-wrap">
							<h3>How to publish</h3>
							<ol>
								<li>Enter custom url</li>
								<li>Log-in to OnPremise Telerik Platform</li>
								<li>Open a Workspace</li>
								<li>Create a Mobile Testing project</li>
								<li>Click API key</li>
								<li>Copy and paste the Project ID and API Key below</li>
							</ol>
						</div>
						<div class="hint-arrow"></div>
					</div>
				</div>
			</div>
			<div style="margin-top:5em"></div>
			<div>
				<p class="tighter"> </p>
				<p class="tighter"> </p>

				<p class="tighter" data-bind="invisible: telerikPlatformSelected">					
					<label>Custom URL</label>
					<input id="picCustomURLText" value="" type="text"/>
				</p>
				<p class="tighter">
					<label>Project ID</label>
					<input id="picProjectIdText" value="#= projectKey #" type="text"/>
				</p>
				<p class="tighter">
					<label>API Key</label>
					<input id="picApiKeyText" value="#= apiKey #" type="text"/>
				</p>
			<div>

			<p>Change these values any time in Settings</p>

			<div class="actions">
				<button id="picSaveBtn" class="tap-button-positive">Save</button>
				<button id="picCancelBtn" class="closeModal">Cancel</button>
			</div>
		</script>
		<script id="agentGridName" type="text/x-kendo-template">

			<label><input type='checkbox' class='agent-selected-item' # if(selected){ # checked # }#><em></em></label>

			# if(businessObj.platformInfo.platformKey === "ios"){				
				# <i class='icon-apple'></i> <span class='agentName'>#: name #</span> #
			}else if(businessObj.platformInfo.platformKey === "web"){
				# <i class='icon-desktop'></i> <span class='agentName'>#: name #</span> #
			}else if(businessObj.platformInfo.platformKey === "android"){
				# <i class='icon-android'></i> <span class='agentName'>#: name #</span> #
			}else if(businessObj.platformInfo.platformKey === "wp8"){
				# <i class='icon-windows'></i> <span class='agentName'>#: name #</span> #
			}else {
				# <i class='icon-question-sign'></i> <span class='agentName'>#: name #</span> #
			} #
		</script>
		<script id="agentTypeTooltip" type="text/x-kendo-template">
			<div class="callout"></div>
			<ul id="selectAgentType">
				<li data-value="desktopWeb"><i class='icon-desktop'></i> Desktop Web</li>
				<li data-value="mobileWeb"><i class='icon-mobile-phone'></i> Mobile Web</li>
				<li data-value="mobileApp"><i class='icon-plus-sign-alt'></i> Mobile App</li>
			</ul>
		</script>

		<script src="js/ui/jquery.min.js"></script>
		<script src="js/ui/kendo.web.min.js"></script>
		<script src="js/ui/moment.min.js"></script>
		<script src="js/biz/utils.js"></script>
		<script>
			// browser must support bind and forEach
			if(!Function.prototype.bind || !Array.prototype.forEach){
				$("<div id='modal' class='dialogWindow window-form'>"+ $("#unableToLoadContent").html() +"</div>")
					.kendoWindow({
						title: "Unable to load Test Runner",
						resizable: false,
						modal: true,
						draggable: false,
						minWidth: 400,
						maxHeight: $(window).height() * 0.8,
						animation: {open: {duration: 150}, close: {duration: 150}}
					}).data("kendoWindow").center().open();
			}
		</script>
		<script src="../core/TelerikTesting.js"></script>
		<script src="js/biz/runnerGlobals.js"></script>
		<script src="js/biz/uiRouter.js"></script>
		<script src="js/biz/testRunner.js"></script>
		<script src="js/biz/localRes.js"></script>
		<script src="js/biz/settingsManager.js"></script>
		<script src="js/biz/connectionManager.js"></script>
		<script src="js/biz/agentListManager.js"></script>
		<script src="js/biz/agentSelectionManager.js"></script>
		<script src="js/biz/testListManager.js"></script>
		<script src="js/biz/executionManager.js"></script>
		<script src="js/biz/resultManager.js"></script>
		
	</body>
</html>
