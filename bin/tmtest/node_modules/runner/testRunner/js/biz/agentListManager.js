!function(){function a(){telerikTesting.agentManager.clientConnection.isConnected&&m&&(l&&(window.clearInterval(l),l=null),g())}function b(a,b){for(var c=0;c<a.length;c++)"function"==typeof a[c]&&a[c].apply(agentListManager,b)}function c(){var a=o.data();p=a.filter(function(a){return a.selected===!0}).length,b(q,[])}function d(a){var b=$(a.target).closest("tr").attr("data-uid");o.getByUid(b).set("selected",$(a.target).is(":checked"))}function e(a){var b=$(a.currentTarget).find("input[type='checkbox']");b.prop("checked",!b.prop("checked")),b.trigger("change")}function f(a){var b=null;return b="web"===a.platformInfo.platformKey?{name:a.platformInfo.name,details:a.platformInfo.browser.version,platform:a.platformInfo.platform}:{name:a.platformInfo.name,details:a.platformInfo.systemVersion,platform:a.platformInfo.platform},b&&(b.id=a.id,b.status=j,b.selected=!0,b.businessObj=a),b}function g(){telerikTesting.agentManager.getExecutionAgents(function(a,b){for(var c=o.data(),d=0;d<c.length;d++)c[d].status=k;b&&b.forEach(function(a){for(var b=!1,d=0;d<c.length;d++)if(a.id===c[d].id){c[d].status=j,b=!0;break}if(!b){var e=f(a);e&&c.push(e)}});var e=c.filter(function(a){return a.status!==k});e.length!==c.length&&o.data(e)})}function h(){m=!1,n.tbody.find(".agent-selected-item").prop("disabled",!0),n.tbody.off("click","tr")}function i(){m=!0,n.tbody.find(".agent-selected-item").prop("disabled",!1),n.tbody.off("click","tr").on("click","tr",e),g()}var j="Connected",k="",l=null,m=!0,n=null,o=null,p=0,q=[];$(document).ready(function(){o=new kendo.data.DataSource({data:[],change:c}),telerikTesting.agentManager.on("agentAdded",function(a){m&&o.add(f(a))}),telerikTesting.agentManager.on("agentRemoved",function(a){if(m){var b=o.data().filter(function(b){return b.id===a});b.length&&o.remove(b[0])}});var b=$("#agentGridName").html();n=$("#agentView").kendoGrid({dataSource:o,groupable:!1,sortable:!1,columns:[{field:"name",title:"Name",width:40,template:b,attributes:{"class":"agent-cell"}},{field:"details",title:"Details",width:30,attributes:{"class":"agent-cell"}},{field:"platform",title:"Platform",width:30,attributes:{"class":"agent-cell"}}]}).data("kendoGrid"),n.tbody.on("change",".agent-selected-item",d),n.tbody.on("click","tr",e);var g=$('<label><input type="checkbox" id="agentViewCheck" checked><em></em></label>');g.on("click",function(a){a.stopPropagation()}),n.thead.find("[data-field='name']").prepend(g);var h=tsUtils.checkboxToggler(g.find("input[type='checkbox']"),n.tbody,".agent-selected-item");h.changeFn=function(){var a=this.$controller.prop("checked"),b=[];this.$checkboxesContainer.find(this.selector).each(function(a,c){b.push($(c).closest("tr").attr("data-uid"))}),b.forEach(function(b){o.getByUid(b).set("selected",a)})},l=window.setInterval(a,500)}),window.agentListManager={getAgents:function(){var a=[];return o.data().forEach(function(b){b.selected&&b.businessObj&&a.push(b.businessObj)}),a},getAgentsCount:function(){return p},disableAgentList:h,enableAgentList:i,onAgentsCountChanged:q}}();