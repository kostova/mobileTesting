!function(){function a(a,b){for(var c=0;c<a.length;c++)"function"==typeof a[c]&&a[c].apply(testListManager,b)}function b(){m.find("#selectionFilePathText").val(""),m.data("kendoWindow").center().open()}function c(){var a,b,c,d,e,f,g=[],h=telerikTesting.getSuites(),i=o.data();for(var j in h)a=h[j],b=i.find(function(a){return a.name===j}),c=b?!!b.checked:x,suiteIsExpanded=b?!!b.expanded:y,d={name:j,type:p.suite,checked:c,_shouldExpand:suiteIsExpanded},a.length>0&&(d.childNodes=[],a.forEach(function(a){e=b?b.childNodes.find(function(b){return b.name===a}):null,f=e?!!e.checked:x,d.childNodes.push({name:a,type:p.test,checked:f})})),g.push(d);return g}function d(){o.data(c());var a=n.options.animation.expand.duration;n.options.animation.expand.duration=0,e(),n.options.animation.expand.duration=a,o.total()&&$("#testTab .halfPanel:eq(0) .loader-big").hide(),n.updateIndeterminate()}function e(){var a=o.data().filter(function(a){return a._shouldExpand});a&&a.forEach(function(a){n.expand(n.findByUid(a.uid)),a._shouldExpand=!1})}function f(a,b){window.setTimeout(function(){var b=document.getElementById(a);null!==b&&b.parentElement.removeChild(b);var c=document.createElement("script");c.type="text/javascript",c.id=a,c.src=a,document.head.appendChild(c)},b)}function g(a,b){if(b(a),a.childNodes)for(var c=0;c<a.childNodes.length;c++)g(a.childNodes[c],b)}function h(){r||(r=window.setTimeout(function(){var b=0,c=o.data();if(c)for(var d=0;d<c.length;d++)g(c[d],function(a){a.checked&&a.type===p.test&&b++});r=null,q!==b&&(q=b,a(v,[]))},0))}function i(){if(t.length){var a=[];a.push("Spec files contain errors"),a.push("<ul class='errors'>"),t.forEach(function(b){a.push("<li>"),b.url&&a.push("<span style='font-weight: bold'>File: </span>  <span>"+b.url+"</span><br/>"),b.line&&a.push("<span style='font-weight: bold'>Line: </span>  <span>"+b.line+"</span><br/>"),b.suite&&a.push("<span style='font-weight: bold'>Suite: </span>  <span>"+b.suite+"</span><br/>"),b.test&&a.push("<span style='font-weight: bold'>Test: </span>  <span>"+b.test+"</span><br/>"),b.step&&a.push("<span style='font-weight: bold'>Step: </span>  <span>"+b.step+"</span><br/>"),b.message&&a.push("<span style='font-weight: bold'>Message: </span> <span>"+b.message+"</span><br/>"),b.stack&&a.push("<span style='font-weight: bold'>Stack: </span>  <span>"+b.stack+"</span><br/>"),a.push("</li> <br/>")}),a.push("</ul>"),tsUtils.popNotification(a.join(""),"error")}else u&&tsUtils.popNotification("Spec files reloaded","success",w)}function j(a){var b=a.sourceURL?decodeURI(a.sourceURL):null,c={};c=a.suite?{message:a.message,suite:a.suite,test:a.test,step:a.step,stack:a.stack}:{url:b,line:a.line,message:a.message,suite:a.suite,test:a.test,step:a.step,stack:a.stack},t.push(c)}function k(a,b,c){var d=decodeURI(b);return t.push({url:d,line:c,message:a}),!1}function l(a){if(!a.length)return telerikTesting.clearSuites(),d(),$(".loader-big").hide(),tsUtils.popNotification("Invalid spec folder or no spec files found","error",w),void 0;u=s.length>0,s=[],t=[],telerikTesting.clearSuites();var b=window.onerror;window.onerror=k,telerikTesting.on("error",j);for(var c=0;c<a.length;c++){var e=window.location.protocol+"//"+window.location.host+a[c];s.push(e),f(e,20*c)}window.setTimeout(function(){i(),window.onerror=b,telerikTesting.off("error",j),d()},20*a.length+100)}var m=null,n=null,o=null,p={all:"all",suite:"suite",test:"test"},q=0,r=null,s=[],t=[],u=!1,v=[],w=2500,x=!0,y=!0;$(document).ready(function(){o=new kendo.data.HierarchicalDataSource({schema:{model:{id:"indexId",children:"childNodes"}},change:h}),n=$("#testView").kendoTreeView({checkboxes:{checkChildren:!0,template:"<label><input class='sweetSuiteCheck' type='checkbox' #if(item.checked){# checked #}#><em></em></label>"},animation:{collapse:{duration:100},expand:{duration:100}},loadOnDemand:!1,dataSource:o,dataTextField:"name"}).data("kendoTreeView"),d(),n.element.on("click",".k-in",function(a){$(a.currentTarget).parent().find(".sweetSuiteCheck").click()}),$("#addTestBtn").click(b),localRes.onSpecFilesReceived(l);var a=setInterval(function(){localRes.isConnected()&&(clearInterval(a),localRes.requestSpecFiles())},500);tsUtils.checkboxToggler($("#sweetSuiteToggler"),$("#testView"),".sweetSuiteCheck")}),window.testListManager={getTests:function(){var a={},b=o.data(),c=null;if(b)for(var d=0;d<b.length;d++)g(b[d],function(b){b.type==p.suite?c=b.name:b.checked&&b.type==p.test&&(a[c]||(a[c]=[]),a[c].push(b.name))});return a},getTestsCount:function(){return q},disableTestTree:function(){var a=o.data().filter(function(a){return a.expanded});a&&a.forEach(function(a){a._shouldExpand=!0}),n.enable(".k-item",!1)},enableTestTree:function(){n.enable(".k-item"),e()},onTestsCountChanged:v}}();