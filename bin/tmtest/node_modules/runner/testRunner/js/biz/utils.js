window.tsUtils={popNotification:function(a,b,c){b=b||"info";var d=$("<div class='notification tap-msg tap-msg-"+b+"'>"+a+"<span class='close tap-msg-close'><i class='icon-remove'></i></span></div>");return d.close=function(){d.fadeOut("fast",function(){d.remove()})},d.on("click",".close",function(){d.close()}),$(".notification.tap-msg").remove(),$("body").append(d),d.fadeIn("fast"),c&&setTimeout(function(){d.close()},c),d},popModal:function(a,b,c,d,e){d=d||{},c=c||{};var f={title:a||"",resizable:!1,modal:!0,draggable:!1,minWidth:550,maxHeight:.8*$(window).height(),animation:{open:{duration:150},close:{duration:150}}},g=function(){j.close(),setTimeout(function(){j.destroy()},250)},h={"click .closeModal":g};d=tsUtils.extend(f,d),c=tsUtils.extend(h,c);var i=$("<div id='modal' class='dialogWindow window-form'>"+b+"</div>").kendoWindow(d),j=i.data("kendoWindow");return tsUtils.bindEvents(c,i,j),j.closeAndDestroy=g,e||$("body").off("click",".k-overlay").on("click",".k-overlay",j.closeAndDestroy),d.hide||j.center().open(),j},bindEvents:function(a,b,c){var d,e,f;for(var g in a)e=g.split(" "),f=e.shift(),e=e.join(" "),d=a[g],"function"==typeof d&&b.off(f,e).on(f,e,d.bind(c||b))},extend:function(a){var b=Array.prototype.slice.call(arguments,1);return b.forEach(function(b){if(b)for(var c in b)a[c]=b[c]}),a},hash:function(a){return a.split("").reduce(function(a,b){return a=(a<<5)-a+b.charCodeAt(0),a&a},0)},validate:function(a){var b=!0,c=function(a){var d=a.$el.val(),e=[],f=a.$el.prev();a.rules.forEach(function(a){a.rule(d)||(b=!1,e.push(a.msg))}),f.removeClass("error").find(".errSpan").remove(),a.$el.removeClass("error"),e.length&&(f.addClass("error").append("<span class='errSpan'> "+e[0]+"</span>"),a.$el.addClass("error")),a.$el.off("keyup").on("keyup",function(){c(a)})};return a.forEach(c),b},checkboxToggler:function(a,b,c){return{$controller:a,$checkboxesContainer:b,selector:c||"input[type='checkbox']",changeFn:function(){var a=this.$controller.prop("checked");b.off("change",c,this.checkboxChecker),this.$checkboxesContainer.find(this.selector).prop("checked",a).trigger("change"),b.on("change",c,this.checkboxChecker)},checkboxChecker:function(){var a=this.$checkboxesContainer.find(this.selector),b=a.length,c=a.filter(":checked").length;0===c?this.$controller.prop("checked",!1).prop("indeterminate",!1):b===c?this.$controller.prop("checked",!0).prop("indeterminate",!1):this.$controller.prop("indeterminate",!0)},init:function(){return this.changeFn=this.changeFn.bind(this),this.checkboxChecker=this.checkboxChecker.bind(this),this.$controller.on("change",function(){this.changeFn.call(this)}.bind(this)),this.$checkboxesContainer.on("change",this.selector,this.checkboxChecker),this}}.init()},parseQueryString:function(a){var b={};return"?"===a[0]&&(a=a.substr(1)),a.split("&").forEach(function(a){var c=a.split("=");b[c[0]]=c[1]}),b}},moment.duration.fn.format=function(a,b){var c=this.hours(),d=this.minutes(),e=this.seconds(),f=(this.milliseconds(),[]),g=b?"00":"0",h=b?-2:-1;return(c||a)&&f.push((g+c).slice(h)+"h"),(d||a)&&f.push((g+d).slice(h)+"min"),(e||a)&&f.push((g+e).slice(h)+"sec "),f=f.join(" "),f||"< 1sec"};