function WebSocketsServerProvider(a){EventEmitter.call(this),this._connection=a}var TsAutomationProtocol=require("./TsAutomationProtocol.js"),EventEmitter=require("events").EventEmitter,util=require("util"),logger=require("./logger.js");util.inherits(WebSocketsServerProvider,EventEmitter),WebSocketsServerProvider.prototype.start=function(){this._connection.on("message",function(a){a&&a.utf8Data?this.emit("message",a.utf8Data):logger.error("Error: Invalid message type received. Ignoring it.")}.bind(this)),this._connection.on("close",function(){this.emit("close"),this._connection=null}.bind(this)),this.emit("connect")},WebSocketsServerProvider.prototype.stop=function(){this._connection&&(this._connection.close(),this._connection=null)},WebSocketsServerProvider.prototype.sendMessage=function(a){this._connection&&this._connection.sendUTF(a)},module.exports=WebSocketsServerProvider;